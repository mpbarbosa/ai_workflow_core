# AI Workflow Automation Configuration
# Project: ai_workflow_core
# Created: 2026-01-29

project:
  name: "AI Workflow Core"
  type: "configuration-library"
  description: "Language-agnostic foundational configuration and templates for AI-powered workflow automation"
  kind: "configuration_library"
  version: "1.0.0"

tech_stack:
  primary_language: "yaml"
  build_system: "none"
  test_framework: "validation-scripts"
  test_command: "python scripts/validate_context_blocks.py"
  lint_command: "yamllint -d relaxed config/"

structure:
  source_dirs:
    - config
    - github/workflows
    - scripts
  test_dirs:
    - scripts
  docs_dirs:
    - docs
    - examples

workflow:
  # Enable smart execution to skip unchanged areas
  smart_execution: true
  
  # Enable parallel execution for independent steps
  parallel_execution: true
  
  # AI caching enabled by default (24-hour TTL)
  ai_cache_enabled: true
  
  # Auto-commit workflow artifacts
  auto_commit: false
  
  # Multi-stage pipeline for progressive validation
  multi_stage_pipeline: false
  
  # ML optimization (requires historical data)
  ml_optimize: false
  
  # Workflow step execution order
  # Steps are executed in the order listed below
  # Git Finalization MUST be the final step
  steps:
    # Pre-Flight Phase (0x)
    - id: "0a"
      name: "Version Pre-Update"
      file: "step_0a_version_update.sh"
      description: "Pre-increment version for development cycle"
      phase: "pre-flight"
      can_parallelize: false
      
    - id: "0b"
      name: "Bootstrap Documentation"
      file: "step_0b_bootstrap_docs.sh"
      description: "Generate initial documentation from scratch"
      phase: "pre-flight"
      can_parallelize: false
      dependencies: ["0a"]
      
    - id: "00"
      name: "Pre-Analysis"
      file: "step_00_analyze.sh"
      description: "Analyze project structure and changes"
      phase: "pre-flight"
      can_parallelize: false
      dependencies: ["0b"]

    # Analysis & Documentation Phase (01-03)
    - id: "01"
      name: "Documentation Updates"
      file: "step_01_documentation.sh"
      description: "AI-powered documentation analysis and updates"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["00"]
      ai_persona: "documentation_specialist"
      
    - id: "02"
      name: "Consistency Check"
      file: "step_02_consistency.sh"
      description: "Check documentation consistency"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["01"]
      ai_persona: "consistency_checker"
      
    - id: "03"
      name: "Script References"
      file: "step_03_script_refs.sh"
      description: "Validate cross-references and links"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["01"]

    # Structure & Validation Phase (04-05)
    - id: "04"
      name: "Configuration Validation"
      file: "step_04_config_validation.sh"
      description: "Validate project configuration"
      phase: "structure"
      can_parallelize: true
      dependencies: ["00"]
      
    - id: "05"
      name: "Directory Structure"
      file: "step_05_directory.sh"
      description: "Validate and organize directory structure"
      phase: "structure"
      can_parallelize: false
      dependencies: ["04"]

    # Testing Phase (06-08)
    - id: "06"
      name: "Test Review"
      file: "step_06_test_review.sh"
      description: "Review existing tests and identify gaps"
      phase: "testing"
      can_parallelize: false
      dependencies: ["05"]
      ai_persona: "test_engineer"
      
    - id: "07"
      name: "Test Generation"
      file: "step_07_test_gen.sh"
      description: "Generate new tests based on review"
      phase: "testing"
      can_parallelize: false
      dependencies: ["06"]
      ai_persona: "test_engineer"
      
    - id: "08"
      name: "Test Execution"
      file: "step_08_test_exec.sh"
      description: "Execute test suite and collect results"
      phase: "testing"
      can_parallelize: false
      dependencies: ["07"]

    # Quality Phase (09-10)
    - id: "09"
      name: "Dependency Analysis"
      file: "step_09_dependencies.sh"
      description: "Analyze and validate dependencies"
      phase: "quality"
      can_parallelize: true
      dependencies: ["08"]
      
    - id: "10"
      name: "Code Quality"
      file: "step_10_code_quality.sh"
      description: "Run code quality checks and linting"
      phase: "quality"
      can_parallelize: true
      dependencies: ["08"]
      ai_persona: "code_reviewer"

    # Context & Analysis Phase (11-14)
    - id: "11"
      name: "Context Analysis"
      file: "step_11_context.sh"
      description: "Analyze project context and relationships"
      phase: "context"
      can_parallelize: false
      dependencies: ["09", "10"]
      
    - id: "12"
      name: "Markdown Linting"
      file: "step_12_markdown_lint.sh"
      description: "Lint and fix markdown documentation"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["02"]
      
    - id: "13"
      name: "Prompt Engineering"
      file: "step_13_prompt_engineer.sh"
      description: "Optimize AI prompts and templates"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["11"]
      
    # Finalization Phase (14)
    - id: "14"
      name: "UX Analysis"
      file: "step_14_ux_analysis.sh"
      description: "UI/UX and accessibility analysis"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["10"]
      ai_persona: "ux_designer"
      
    # Version Management (15)
    - id: "15"
      name: "Version Update"
      file: "step_15_version_update.sh"
      description: "Finalize version and generate changelog"
      phase: "versioning"
      can_parallelize: false
      dependencies: ["12", "13", "14"]
      ai_persona: "version_manager"
    
    # Git Completion - MUST BE LAST STEP
    - id: "16"
      name: "Git Finalization"
      file: "step_16_git_finalization.sh"
      description: "Git operations - stage, commit, push - FINAL STEP"
      phase: "completion"
      can_parallelize: false
      required: true
      dependencies: ["15"]

  # Step execution phases for multi-stage pipeline
  phases:
    pre-flight:
      description: "Initial setup and analysis"
      steps: ["0a", "0b", "00"]
      
    analysis:
      description: "Documentation analysis and validation"
      steps: ["01", "02", "03"]
      
    structure:
      description: "Project structure validation"
      steps: ["04", "05"]
      
    testing:
      description: "Test review, generation, and execution"
      steps: ["06", "07", "08"]
      
    quality:
      description: "Code quality and dependency checks"
      steps: ["09", "10"]
      
    context:
      description: "Project context analysis"
      steps: ["11"]
      
    finalization:
      description: "Documentation linting, prompt optimization, and UX analysis"
      steps: ["12", "13", "14"]
      
    versioning:
      description: "Version management and changelog generation"
      steps: ["15"]
      
    completion:
      description: "Final git operations - ALWAYS RUNS LAST"
      steps: ["16"]

# Configuration-specific settings
configuration:
  # Template placeholder format
  placeholder_format: "{{VARIABLE_NAME}}"
  
  # Integration type
  integration_type: "git-submodule"
  
  # Required documentation
  required_docs:
    - "README.md"
    - "INTEGRATION.md"
    - "CHANGELOG.md"
  
  # Validation requirements
  validation:
    yaml_syntax: true
    placeholder_consistency: true
    example_completeness: true
    documentation_links: true

# Git submodule configuration
submodule:
  intended_path: ".workflow_core"
  update_strategy: "checkout"
  
# Quality standards
quality:
  documentation:
    integration_guide: true
    examples_required: true
    placeholder_documentation: true
  
  templates:
    placeholder_consistency: true
    example_validation: true
    backward_compatibility: true

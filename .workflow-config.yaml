# AI Workflow Automation Configuration
# Project: ai_workflow_core
# Created: 2026-01-29

project:
  name: "AI Workflow Core"
  type: "configuration-library"
  description: "Language-agnostic foundational configuration and templates for AI-powered workflow automation"
  kind: "configuration_library"
  version: "1.0.1"

tech_stack:
  primary_language: "yaml"
  build_system: "none"
  test_framework: "validation-scripts"
  test_command: "python scripts/validate_context_blocks.py"
  lint_commands:
    yaml: "yamllint -d relaxed config/"

structure:
  src_dirs:
    - config
    - workflow-templates/workflows
    - scripts
  test_dirs:
    - scripts
  docs_dirs:
    - docs
    - examples

workflow:
  # Enable smart execution to skip unchanged areas
  smart_execution: true
  
  # Enable parallel execution for independent steps
  parallel_execution: true
  
  # AI caching enabled by default (24-hour TTL)
  ai_cache_enabled: true
  
  # Auto-commit workflow artifacts
  auto_commit: false
  
  # Multi-stage pipeline for progressive validation
  multi_stage_pipeline: false
  
  # ML optimization (requires historical data)
  ml_optimize: false
  
  # Workflow step execution order
  # Steps are executed in the order listed below
  # Git Finalization (step 12) MUST be the final step
  steps:
    # Pre-Analysis
    - id: "00"
      name: "Pre-Analysis"
      file: "step_00_analyze.js"
      description: "Analyze project structure and changes"
      phase: "analysis"
      can_parallelize: false
      dependencies: []

    # Bootstrap Documentation (0b)
    - id: "0b"
      name: "Bootstrap Documentation"
      file: "step_0b_bootstrap_docs.js"
      description: "Generate initial documentation from scratch"
      phase: "analysis"
      can_parallelize: false
      dependencies: ["00"]
      ai_persona: "technical_writer"

    # Analysis & Documentation Phase (01-03)
    - id: "01"
      name: "Documentation Updates"
      file: "step_01_documentation.js"
      description: "AI-powered documentation analysis and updates"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["00"]
      ai_persona: "documentation_expert"

    - id: "02"
      name: "Consistency Check"
      file: "step_02_consistency.js"
      description: "Check documentation consistency"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["01"]
      ai_persona: "code_quality_analyst"

    - id: "02_5"
      name: "Documentation Optimization"
      file: "step_02_5_doc_optimize.js"
      description: "Optimize and consolidate documentation"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["02"]

    - id: "03"
      name: "Script References"
      file: "step_03_script_refs.js"
      description: "Validate cross-references and links"
      phase: "analysis"
      can_parallelize: true
      dependencies: ["02"]

    # Structure & Validation Phase (04-05)
    - id: "04"
      name: "Configuration Validation"
      file: "step_04_config_validation.js"
      description: "Validate project configuration"
      phase: "validation"
      can_parallelize: true
      dependencies: ["00"]

    - id: "05"
      name: "Directory Structure"
      file: "step_05_directory.js"
      description: "Validate and organize directory structure"
      phase: "validation"
      can_parallelize: false
      dependencies: ["04"]

    # Testing Phase (06-08)
    - id: "06"
      name: "Test Review"
      file: "step_06_test_review.js"
      description: "Review existing tests and identify gaps"
      phase: "testing"
      can_parallelize: false
      dependencies: ["05"]
      ai_persona: "test_engineer"

    - id: "07"
      name: "Test Generation"
      file: "step_07_test_gen.js"
      description: "Generate new tests based on review"
      phase: "testing"
      can_parallelize: false
      dependencies: ["06"]
      ai_persona: "test_engineer"

    - id: "08"
      name: "Test Execution"
      file: "step_08_test_exec.js"
      description: "Execute test suite and collect results"
      phase: "testing"
      can_parallelize: false
      dependencies: ["07"]
      test_command: "python scripts/validate_context_blocks.py && python scripts/validate_structure.py"

    # Quality Phase (09-10)
    - id: "09"
      name: "Dependency Analysis"
      file: "step_09_dependencies.js"
      description: "Analyze and validate dependencies"
      phase: "quality"
      can_parallelize: true
      dependencies: ["08"]
      ai_persona: "dependency_analyst"

    - id: "10"
      name: "Code Quality"
      file: "step_10_code_quality.js"
      description: "Run code quality checks and linting"
      phase: "quality"
      can_parallelize: true
      dependencies: ["09"]
      ai_persona: "architecture_reviewer"

    # Context & Analysis Phase (11)
    - id: "11"
      name: "Context Analysis"
      file: "step_11_context.js"
      description: "Analyze project context and relationships"
      phase: "quality"
      can_parallelize: false
      dependencies: ["10"]

    # Finalization Phase (13-17)
    - id: "13"
      name: "Markdown Linting"
      file: "step_13_markdown_lint.js"
      description: "Lint and fix markdown documentation"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["11"]
      ai_persona: "technical_writer"

    - id: "14"
      name: "Prompt Engineering"
      file: "step_14_prompt_engineer.js"
      description: "Optimize AI prompts and templates"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["13"]
      ai_persona: "prompt_engineer"

    - id: "15"
      name: "UX Analysis"
      file: "step_15_ux_analysis.js"
      description: "UI/UX and accessibility analysis"
      phase: "finalization"
      can_parallelize: true
      dependencies: ["14"]
      ai_persona: "ux_analyst"

    # Version Management (16)
    - id: "16"
      name: "Version Update"
      file: "step_16_version_update.js"
      description: "Finalize version and generate changelog"
      phase: "finalization"
      can_parallelize: false
      dependencies: ["15"]
      ai_persona: "devops_engineer"

    # Workflow Summary (17)
    - id: "17"
      name: "Workflow Summary"
      file: "step_17_summary.js"
      description: "Generate workflow summary report"
      phase: "finalization"
      can_parallelize: false
      dependencies: ["16"]

    # Artifact Commit (0f)
    - id: "0f"
      name: "Commit Artifacts"
      file: "step_0f_commit_artifacts.js"
      description: "Commit workflow artifacts generated during the run"
      phase: "finalization"
      can_parallelize: false
      dependencies: ["17"]

    # Git Completion - MUST BE LAST STEP
    - id: "12"
      name: "Git Finalization"
      file: "step_12_git_finalization.js"
      description: "Git operations - stage, commit, push - FINAL STEP"
      phase: "finalization"
      can_parallelize: false
      required: true
      dependencies: ["0f"]

  # Step execution phases for multi-stage pipeline
  phases:
    analysis:
      description: "Documentation analysis, validation, and optimization"
      steps: ["00", "0b", "01", "02", "02_5", "03"]

    validation:
      description: "Project structure and configuration validation"
      steps: ["04", "05"]

    testing:
      description: "Test review, generation, and execution"
      steps: ["06", "07", "08"]

    quality:
      description: "Code quality, dependency checks, and context analysis"
      steps: ["09", "10", "11"]

    finalization:
      description: "Linting, prompt optimization, UX, versioning, and git - ALWAYS RUNS LAST"
      steps: ["13", "14", "15", "16", "17", "0f", "12"]

# Configuration-specific settings
configuration:
  # Template placeholder format
  placeholder_format: "{{VARIABLE_NAME}}"
  
  # Integration type
  integration_type: "git-submodule"
  
  # Required documentation
  required_docs:
    - "README.md"
    - "INTEGRATION.md"
    - "CHANGELOG.md"
  
  # Validation requirements
  validation:
    yaml_syntax: true
    placeholder_consistency: true
    example_completeness: true
    documentation_links: true

# Git submodule configuration
submodule:
  intended_path: ".workflow_core"
  update_strategy: "checkout"
  
# Quality standards
quality:
  documentation:
    integration_guide: true
    examples_required: true
    placeholder_documentation: true
  
  templates:
    placeholder_consistency: true
    example_validation: true
    backward_compatibility: true
